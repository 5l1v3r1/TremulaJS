<!DOCTYPE html>
<html>
	<head>
		<title>SlinkyJS</title>
		<link rel="stylesheet" href="src/slinky.css">
		<style type="text/css">
					@import url(http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
					body{
						font-family: 'Yanone Kaffeesatz', sans-serif;
					}
		</style>
		<style type="text/css">
			.itemInfo{-webkit-transform: translateZ(0);}
			.gridBox{-webkit-box-reflect :below 18px -webkit-gradient(linear, left bottom, left top, from(rgba(255,255,255,0.25)), color-stop(0.3, transparent)); }

		</style>
		
		<script src="libs/jquery-min.js"></script>
		<script src="libs/hammer.js"></script>
		<script src="libs/jsBezier-0.6.js"></script>
		<script src="libs/raf_shim.js"></script>

		<script src="slinkyConfig.js"></script>
		<script data-main="src/Slinky" src="libs/require.js"></script>

		<script type="text/javascript">
			$().ready(function(){
				// $('.start').click(init);
				setTimeout(function(){
					var slinky = slinkyInit();
					attachSlinkyDomListeners();
					attachDemoControls(slinky);
					window.s=slinky;//does not need to be on the window -- implemented here for convienience.
				},1000);
			});


			function slinkyInit(){
				console.log('starting slinky');


				var slinky = new Slinky();
				window.slinky = slinky;//not necessary -- just for demo convienience

				var config = slinkyConfigs.large1Row.call(slinky);

				$slinkyContainer = $('.slinkyContainer');
				slinky.init($slinkyContainer,config,this);


			
				function refreshData(data,dataAdapter){
					var s = slinky;
					s.spring.initBoxes(data,dataAdapter,false);
					s.spring.statsCache.endOfScrollFlag = false;
				}

				var dataUrl = 'http://ws-decor.art.com/api/decorProductSearch?engine=judy&pageNumber=1&numProducts=100&rsLimit=1000&moodId=undefined&paletteHex=dfdd78-695d87&statusMsg=0.632s%3A+200+of+1000+returned&refinements=&keyword=abstract&includePoster=true&includeArt=true&includeDecorProducts=false&totalRetrieved=0&getDataFromThisUrl=null&totalFound=1000&pageReturned=4';

				$.getJSON(dataUrl,function(res){
					refreshData(res.ImageDetails,slinky.dataAdapters.JudyItem);
				})

				return slinky;
			}

			function attachSlinkyDomListeners(){
				$('.slinkyContainer').on('slinkyItemSelect',function(gestureEvt,domEvt){
					// console.log(gestureEvt,domEvt)
					var 
						$e = $(domEvt.target);
						t = $e.closest('.gridBox')[0];
					if(t){
						var data = $.data(t).model.model.data;
					}
					console.log(data||{})
				})
			}

		</script>


		<script type="text/javascript">
				function attachDemoControls(slinky){
					var s = slinky.spring;

					$(".btnL1").click(function() {
						s.jumpToScrollProgress(0);
						setTimeout(function(){
							s.doTransition(slinky.layouts.basicGridLayout,{axes:0,itemConstraint:200},800,slinky.easings.easeOutElastic,slinky.projections.xyPlane);
						}, 100)
					})
					
					$(".btnL2").click(function() {
						s.jumpToScrollProgress(0);
						setTimeout(function(){
							s.doTransition(slinky.layouts.basicGridLayout,{axes:0,itemConstraint:350},800,slinky.easings.easeOutElastic,slinky.projections.turntable);
							s.setItemEasing(false);
						}, 100)
					})
					
					$(".btnL3").click(function() {
						s.jumpToScrollProgress(0);
						setTimeout(function(){
							s.doTransition(slinky.layouts.basicGridLayout,{axes:0,itemConstraint:350},800,slinky.easings.easeOutElastic,slinky.projections.enterTheDragon);
							s.setItemEasing(false);
						}, 100)
					})
					
					$(".btnL4").click(function() {
						s.jumpToScrollProgress(0);
						setTimeout(function(){
							s.doTransition(slinky.layouts.basicGridLayout,{axes:0,itemConstraint:100},800,slinky.easings.easeOutElastic,slinky.projections.sunrise);
							s.setItemEasing(false);
						}, 100)
					})
					
					$(".btnL5").click(function() {
						s.jumpToScrollProgress(0);
						setTimeout(function(){
							s.doTransition(slinky.layouts.basicGridLayout,{axes:0,itemConstraint:200},800,slinky.easings.easeOutElastic,slinky.projections.expandedCenter);
							s.setItemEasing(false);
						}, 100)
					})
					
					
					$(".tailScroll").click(function() {
						s.setLastTouchOrigin(s.gridDims[s.si]/2);
						s.easeTo(s.getScrollPos()-s.getScrollViewDim(),600)
					})
					
					$(".btn1").click(function() {
						s.jumpToScrollProgress(0);
						setTimeout(function(){
							s.doTransition(slinky.layouts.basicGridLayout,{axes:0,itemConstraint:300},800,slinky.easings.easeOutElastic);
						}, 100)
					})

					$(".btn2").click(function() {
						s.jumpToScrollProgress(0);
						setTimeout(function(){
							s.doTransition(slinky.layouts.basicGridLayout,{axes:1,itemConstraint:100},800,slinky.easings.easeOutElastic);
						}, 100)
					})
					$(".btn3").click(function() {
						s.jumpToScrollProgress(0);
						setTimeout(function(){
							s.doTransition(slinky.layouts.basicGridLayout,{axes:2,itemConstraint:100},800,slinky.easings.easeOutElastic);
						}, 100)
					})
					// $(".btn4").click(function() {
					// 	s.jumpToScrollProgress(0);
					// 	setTimeout(function(){
					// 		s.doTransition(slinky.layouts.basicGridLayout,{axes:4},800,slinky.easings.easeOutElastic);
					// 	}, 100)
					// })


					// $(".btn5").click(function() {
					// 	s.doTransition(slinky.layouts.stackLayout,{axes:1},800,slinky.easings.easeOutElastic);//easeInOutQuad
					// })
					
					$(".toggleItemEase").click(function() {
						s.setItemEasing(!s.itemEasing);//easeInOutQuad
					})
					
					
					$(".toggleScrollAxis").click(function() {
						s.toggleScrollAxis();
					})
					
					
					$(".toggleIsLooping").click(function() {
						s.toggleIsLooping();
					})
				}


// slinky.spring.updateConfig({itemConstraint:100,itemEasing:false});	
// setTimeout(function(){
// 	s.doTransition(slinky.layouts.basicGridLayout,{axes:2},800,slinky.easings.easeOutElastic);
// }, 500)

// slinky.spring.updateConfig({itemConstraint:300,itemEasing:false,staticAxisCount:2});	
// setTimeout(function(){
// 	s.doTransition(slinky.layouts.basicGridLayout,{axes:0},800,slinky.easings.easeOutElastic);
// }, 500)



		</script>

	</head>
	<body>
		<style type="text/css">
			.controls{
				position: absolute;
				bottom: 0px;
				left: 0px;
				width: 100%;
				background-color: #fff;
				margin: 0px;
				padding: 0px;
			}
			.buttons{
				list-style-type: none;
				margin: 0;
				padding: 2em;			
			}
			.buttons li{
				display: inline-block;
				padding: .5em;
				background: #9e9;
				margin: 1.5ex 1em -1ex -1em;
				cursor: pointer;
			}
			.group{
				display: inline-block;
				margin-right:3em;
				position: relative;
			}
		</style>
		
		<h1>SlinkyJS</h1>
		<div class="slinkyContainer main"></div>
		<div class="controls">
			<ul class="buttons" >
				<div class="group">
					<li class="btn1">1 Axis</li>
					<li class="btn2">2 Axes</li>
					<li class="btn3">3 Axes</li>
<!-- 					<li class="btn4">5 Axes</li> -->
				</div>
				<div class="group">
					<li class="size1">sm</li>
					<li class="size2">med</li>
					<li class="size3">lg</li>
				</div>

				
				<div class="group">
					<li class="btnL1">xyPlane</li>
					<li class="btnL2">turntable</li>
					<li class="btnL3">enterTheDragon</li>
					<li class="btnL4">sunrise</li>
					<li class="btnL5">sunrise</li>
				</div>

				
				<div class="group">
					<li class="toggleItemEase">toggle ease</li>
					<li class="toggleScrollAxis">toggle axis</li>
					<li class="toggleIsLooping">toggle looping</li>
					<li class="tailScroll">tail scroll</li>
				</div>


			</ul>
		
		</div>

	</body>
</html>